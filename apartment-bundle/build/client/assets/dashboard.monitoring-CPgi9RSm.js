import{u as P,r as U,j as e}from"./components-C4PRGKvj.js";import{D as V,c as X,B as w}from"./DashboardLayout-iJTv5ljA.js";import{t as E,c as k,n as S,s as H,m as q,a as J,f as j}from"./format-Bu9WfNjO.js";import{c as O,S as f,T as M,a as s}from"./createReactComponent-DHQulasG.js";import{G as a}from"./Group-Di6LCSVE.js";import{T as x}from"./ThemeIcon-D_dEcrCn.js";import{A as Q}from"./Alert-j1ZULBv_.js";import{I as D}from"./IconAlertTriangle-DFuG4EF5.js";import{C as o,I as W}from"./IconBed-BsGsTKgU.js";import{C as A}from"./Center-oTmovjkX.js";import{I as _}from"./IconInfoCircle-BZ-Vof_0.js";import{G as C}from"./Grid-DiAWRBVG.js";import"./Button-BnDQv5QN.js";import"./FocusTrap-jbxXVj5U.js";import"./use-id-CERWC921.js";import"./create-safe-context-C00InVMJ.js";import"./use-resolved-styles-api-Djkjaxcn.js";import"./CloseButton-Dp9Chenx.js";import"./get-base-value-JqT_q0U7.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["path",{d:"M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4",key:"svg-0"}],["path",{d:"M18 18m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M15 3v4",key:"svg-2"}],["path",{d:"M7 3v4",key:"svg-3"}],["path",{d:"M3 11h16",key:"svg-4"}],["path",{d:"M18 16.496v1.504l1 1",key:"svg-5"}]],Z=O("outline","calendar-time","CalendarTime",Y);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]],$=O("outline","clock","Clock",ee);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]],re=O("outline","user","User",se);function ie(i,t,c){const d=E(i,c==null?void 0:c.in);return isNaN(t)?k(i,NaN):(d.setDate(d.getDate()+t),d)}function L(i){return k(i,Date.now())}function b(i,t,c){const[d,p]=S(c==null?void 0:c.in,i,t);return+H(d)==+H(p)}function B(i){return t=>{const d=(i?Math[i]:Math.trunc)(t);return d===0?0:d}}function y(i,t,c){const[d,p]=S(c==null?void 0:c.in,i,t),h=(+d-+p)/q;return B(c==null?void 0:c.roundingMethod)(h)}function ce(i,t){return+E(i)-+E(t)}function N(i,t,c){const d=ce(i,t)/J;return B(c==null?void 0:c.roundingMethod)(d)}function R(i,t){return b(k(i,i),L(i))}function ne(i,t){return b(i,ie(L(i),1),t)}const Ie=()=>[{title:"Real-time Monitoring - Apartment Management"},{name:"description",content:"Monitor upcoming checkouts and tenant activities"}];function Te(){const{user:i,upcomingCheckouts:t,todayCheckIns:c,overdueCheckouts:d,currentTime:p}=P(),[h,G]=U.useState(new Date(p));U.useEffect(()=>{const r=setInterval(()=>{G(new Date)},6e4);return()=>clearInterval(r)},[]);const K=r=>{const n=new Date(r),l=y(n,h);return l<=2?{level:"critical",color:"red",label:"Critical"}:l<=6?{level:"high",color:"orange",label:"High"}:l<=12?{level:"medium",color:"yellow",label:"Medium"}:{level:"low",color:"blue",label:"Low"}},F=r=>{const n=new Date(r),l=y(n,h),m=N(n,h)%60;return l<1?`${m} minutes`:`${l}h ${m}m`},I=t.filter(r=>y(new Date(r.checkOut),h)<=2);return e.jsx(V,{user:i,children:e.jsxs(f,{children:[e.jsxs(a,{justify:"space-between",children:[e.jsx(M,{order:2,children:"Real-time Monitoring"}),e.jsxs(a,{children:[e.jsx(x,{color:"blue",variant:"light",children:e.jsx(X,{size:16})}),e.jsxs(s,{size:"sm",c:"dimmed",children:["Last updated: ",j(h,"HH:mm:ss")]})]})]}),I.length>0&&e.jsxs(Q,{icon:e.jsx(D,{size:16}),title:"Critical Checkouts Alert",color:"red",children:[I.length," tenant(s) need to check out within 2 hours!"]}),d.length>0&&e.jsxs(o,{children:[e.jsxs(a,{mb:"md",children:[e.jsx(x,{color:"red",size:"lg",children:e.jsx(D,{size:20})}),e.jsxs(M,{order:3,c:"red",children:["Overdue Checkouts (",d.length,")"]})]}),e.jsx(f,{gap:"md",children:d.map(r=>{const n=Math.abs(y(h,new Date(r.checkOut))),l=Math.abs(N(h,new Date(r.checkOut)))%60,m=n>0?`${n}h ${l}m`:`${l}m`;return e.jsx(o,{withBorder:!0,p:"md",style:{borderLeft:"4px solid #fa5252"},children:e.jsxs(a,{justify:"space-between",wrap:"nowrap",children:[e.jsx("div",{style:{flex:1},children:e.jsxs(a,{gap:"lg",wrap:"nowrap",children:[e.jsxs("div",{children:[e.jsx(s,{fw:600,size:"sm",c:"red",children:"OVERDUE"}),e.jsxs(s,{fw:500,children:[r.user.firstName," ",r.user.lastName]}),e.jsx(s,{size:"sm",c:"dimmed",children:r.user.email})]}),e.jsxs("div",{children:[e.jsx(s,{size:"xs",c:"dimmed",children:"UNIT"}),e.jsxs(s,{fw:500,children:["Unit ",r.room.number]}),e.jsx(s,{size:"sm",c:"dimmed",children:r.room.type.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx(s,{size:"xs",c:"dimmed",children:"EXPECTED CHECKOUT"}),e.jsx(s,{fw:500,children:j(new Date(r.checkOut),"MMM dd, HH:mm")}),e.jsxs(w,{color:"red",size:"sm",children:[m," overdue"]})]}),e.jsxs("div",{children:[e.jsx(s,{size:"xs",c:"dimmed",children:"DURATION OVERDUE"}),e.jsx(s,{fw:700,size:"lg",c:"red",children:m}),e.jsx(s,{size:"xs",c:"red",children:"past due"})]})]})}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx(s,{size:"xs",c:"dimmed",children:"CONTACT"}),e.jsx(s,{size:"sm",fw:500,children:r.user.phone})]})]})},r.id)})})]}),e.jsxs(o,{children:[e.jsxs(a,{mb:"md",children:[e.jsx(x,{color:"orange",size:"lg",children:e.jsx($,{size:20})}),e.jsx(M,{order:3,children:"Upcoming Checkouts (Next 48 Hours)"})]}),t.length===0?e.jsx(A,{p:"xl",children:e.jsxs(f,{align:"center",children:[e.jsx(_,{size:48,color:"gray"}),e.jsx(s,{c:"dimmed",children:"No upcoming checkouts in the next 48 hours"})]})}):e.jsx(f,{gap:"md",children:t.map(r=>{const n=K(r.checkOut),l=F(r.checkOut);return e.jsx(o,{withBorder:!0,p:"md",style:{borderLeft:`4px solid var(--mantine-color-${n.color}-6)`,backgroundColor:n.level==="critical"?"var(--mantine-color-red-0)":void 0},children:e.jsxs(a,{justify:"space-between",wrap:"nowrap",children:[e.jsx("div",{style:{flex:1},children:e.jsxs(a,{gap:"lg",wrap:"nowrap",children:[e.jsxs("div",{children:[e.jsx(w,{color:n.color,size:"sm",mb:"xs",children:n.label}),e.jsxs(s,{fw:500,children:[r.user.firstName," ",r.user.lastName]}),e.jsx(s,{size:"sm",c:"dimmed",children:r.user.email})]}),e.jsxs("div",{children:[e.jsx(s,{size:"xs",c:"dimmed",children:"UNIT"}),e.jsxs(s,{fw:500,children:["Unit ",r.room.number]}),e.jsx(s,{size:"sm",c:"dimmed",children:r.room.type.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx(s,{size:"xs",c:"dimmed",children:"CHECKOUT TIME"}),e.jsx(s,{fw:500,children:j(new Date(r.checkOut),"MMM dd, HH:mm")}),e.jsxs(s,{size:"sm",c:"dimmed",children:[R(new Date(r.checkOut))&&"Today",ne(new Date(r.checkOut))&&"Tomorrow"]})]}),e.jsxs("div",{children:[e.jsx(s,{size:"xs",c:"dimmed",children:"TIME REMAINING"}),e.jsx(s,{fw:700,size:"lg",c:n.color,children:l}),e.jsx(s,{size:"xs",c:n.color,children:"until checkout"})]})]})}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx(s,{size:"xs",c:"dimmed",children:"CONTACT"}),e.jsx(s,{size:"sm",fw:500,children:r.user.phone}),e.jsxs("div",{style:{marginTop:"8px",textAlign:"center"},children:[e.jsx(s,{size:"xs",c:"dimmed",children:"TIME LEFT"}),e.jsx(w,{color:n.color,size:"lg",variant:"filled",children:l})]})]})]})},r.id)})})]}),e.jsxs(o,{children:[e.jsxs(a,{mb:"md",children:[e.jsx(x,{color:"green",size:"lg",children:e.jsx(Z,{size:20})}),e.jsx(M,{order:3,children:"Today's Check-ins"})]}),c.length===0?e.jsx(A,{p:"xl",children:e.jsxs(f,{align:"center",children:[e.jsx(_,{size:48,color:"gray"}),e.jsx(s,{c:"dimmed",children:"No check-ins scheduled for today"})]})}):e.jsx(f,{gap:"md",children:c.map(r=>{const n=new Date(r.checkIn);n.getHours()===0&&n.getMinutes()===0&&n.setHours(15,0,0,0);const l=y(n,h),m=N(n,h)%60;let v,z,u;if(l>0)v=`${l}h ${Math.abs(m)}m`,z="until check-in",u="blue";else if(l===0&&m>0)v=`${m}m`,z="until check-in",u="blue";else{const g=Math.abs(l),T=Math.abs(m);v=g>0?`${g}h ${T}m`:`${T}m`,z="check-in ready",u="green"}return e.jsx(o,{withBorder:!0,p:"md",style:{borderLeft:"4px solid var(--mantine-color-green-6)",backgroundColor:"var(--mantine-color-green-0)"},children:e.jsxs(a,{justify:"space-between",wrap:"nowrap",children:[e.jsx("div",{style:{flex:1},children:e.jsxs(a,{gap:"lg",wrap:"nowrap",children:[e.jsxs("div",{children:[e.jsx(w,{color:r.status==="CHECKED_IN"?"blue":"green",size:"sm",mb:"xs",children:r.status==="CHECKED_IN"?"Checked In":"Confirmed"}),e.jsxs(s,{fw:500,children:[r.user.firstName," ",r.user.lastName]}),e.jsx(s,{size:"sm",c:"dimmed",children:r.user.email})]}),e.jsxs("div",{children:[e.jsx(s,{size:"xs",c:"dimmed",children:"UNIT"}),e.jsxs(s,{fw:500,children:["Unit ",r.room.number]}),e.jsx(s,{size:"sm",c:"dimmed",children:r.room.type.replace("_"," ")})]}),e.jsxs("div",{children:[e.jsx(s,{size:"xs",c:"dimmed",children:"CHECK-IN"}),e.jsx(s,{fw:500,children:(()=>{const g=new Date(r.checkIn);return j(g,"HH:mm")==="00:00"?"3:00 PM":j(g,"h:mm a")})()}),e.jsx(s,{size:"sm",c:"green",children:R(new Date(r.checkIn))?"Today":j(new Date(r.checkIn),"MMM dd")})]}),e.jsxs("div",{children:[e.jsx(s,{size:"xs",c:"dimmed",children:"TIME STATUS"}),e.jsx(s,{fw:700,size:"lg",c:u,children:v}),e.jsx(s,{size:"xs",c:u,children:z})]})]})}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx(s,{size:"xs",c:"dimmed",children:"CONTACT"}),e.jsx(s,{size:"sm",fw:500,children:r.user.phone}),e.jsxs("div",{style:{marginTop:"8px",textAlign:"center"},children:[e.jsx(w,{color:u,size:"lg",variant:"filled",children:v}),e.jsx(s,{size:"xs",c:u,mt:2,children:z})]})]})]})},r.id)})})]}),e.jsxs(C,{children:[e.jsx(C.Col,{span:{base:12,md:3},children:e.jsx(o,{children:e.jsxs(a,{children:[e.jsx(x,{color:"red",size:"lg",children:e.jsx(D,{size:20})}),e.jsxs("div",{children:[e.jsx(s,{size:"xl",fw:700,children:d.length}),e.jsx(s,{size:"sm",c:"dimmed",children:"Overdue"})]})]})})}),e.jsx(C.Col,{span:{base:12,md:3},children:e.jsx(o,{children:e.jsxs(a,{children:[e.jsx(x,{color:"orange",size:"lg",children:e.jsx($,{size:20})}),e.jsxs("div",{children:[e.jsx(s,{size:"xl",fw:700,children:I.length}),e.jsx(s,{size:"sm",c:"dimmed",children:"Critical (2h)"})]})]})})}),e.jsx(C.Col,{span:{base:12,md:3},children:e.jsx(o,{children:e.jsxs(a,{children:[e.jsx(x,{color:"blue",size:"lg",children:e.jsx(W,{size:20})}),e.jsxs("div",{children:[e.jsx(s,{size:"xl",fw:700,children:t.length}),e.jsx(s,{size:"sm",c:"dimmed",children:"Upcoming (48h)"})]})]})})}),e.jsx(C.Col,{span:{base:12,md:3},children:e.jsx(o,{children:e.jsxs(a,{children:[e.jsx(x,{color:"green",size:"lg",children:e.jsx(re,{size:20})}),e.jsxs("div",{children:[e.jsx(s,{size:"xl",fw:700,children:c.length}),e.jsx(s,{size:"sm",c:"dimmed",children:"Today's Check-ins"})]})]})})})]})]})})}export{Te as default,Ie as meta};
