import{j as e,u as q,a as V,r as h,F as L}from"./components-C4PRGKvj.js";import{u as $,D as Q,B as P}from"./DashboardLayout-iJTv5ljA.js";import{c as X,S as N,T as H,a as i}from"./createReactComponent-DHQulasG.js";import{G as j}from"./Group-Di6LCSVE.js";import{f as J,u as K,b as W,c as M,d as Y,h as Z,m as ee,B as y,P as B}from"./Button-BnDQv5QN.js";import{I as se,S as b}from"./IconPlus-s8q-TQuC.js";import{A as U}from"./Alert-j1ZULBv_.js";import{I as w}from"./IconInfoCircle-BZ-Vof_0.js";import{G as o}from"./Grid-DiAWRBVG.js";import{T as _}from"./TextInput-BnXTk2f9.js";import{I as le}from"./IconSearch-CCM7Vt_l.js";import{C as te}from"./IconBed-BsGsTKgU.js";import{M as ae}from"./Modal-DGehu6Yg.js";import{N as R,T as re}from"./NumberInput-DLSkAwXW.js";import"./FocusTrap-jbxXVj5U.js";import"./use-id-CERWC921.js";import"./create-safe-context-C00InVMJ.js";import"./use-resolved-styles-api-Djkjaxcn.js";import"./InputBase-gTWN9iHu.js";import"./CloseButton-Dp9Chenx.js";import"./get-base-value-JqT_q0U7.js";import"./objectWithoutPropertiesLoose-Cv5OCJ0e.js";var G={root:"m_3eebeb36",label:"m_9e365f20"};const ie={orientation:"horizontal"},oe=Y((t,{color:r,variant:a,size:f})=>({root:{"--divider-color":r?ee(r,t):void 0,"--divider-border-style":a,"--divider-size":Z(f,"divider-size")}})),z=J((t,r)=>{const a=K("Divider",ie,t),{classNames:f,className:F,style:g,styles:n,unstyled:C,vars:c,color:T,orientation:d,label:x,labelPosition:u,mod:S,attributes:p,...A}=a,v=W({name:"Divider",classes:G,props:a,className:F,style:g,classNames:f,styles:n,unstyled:C,attributes:p,vars:c,varsResolver:oe});return e.jsx(M,{ref:r,mod:[{orientation:d,"with-label":!!x},S],...v("root"),...A,role:"separator",children:x&&e.jsx(M,{component:"span",mod:{position:u},...v("label"),children:x})})});z.classes=G;z.displayName="@mantine/core/Divider";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]],ce=X("outline","filter","Filter",ne),Re=()=>[{title:"Rooms - Apartment Management"},{name:"description",content:"Manage apartment units"}];function ze(){const{user:t,rooms:r}=q(),a=V(),[f,{open:F,close:g}]=$(!1),[n,C]=h.useState(""),[c,T]=h.useState(null),[d,x]=h.useState(null),[u,S]=h.useState(null),[p,A]=h.useState(null),v=h.useMemo(()=>{const s=[...new Set(r.map(l=>l.floor))].sort((l,I)=>l-I),m=[...new Set(r.map(l=>l.capacity))].sort((l,I)=>l-I);return{floors:s.map(l=>({value:l.toString(),label:`Floor ${l}`})),capacities:m.map(l=>({value:l.toString(),label:`${l} guests`}))}},[r]),D=h.useMemo(()=>r.filter(s=>{var m;if(n){const l=n.toLowerCase();if(!(s.number.toLowerCase().includes(l)||s.type.toLowerCase().includes(l)||((m=s.description)==null?void 0:m.toLowerCase().includes(l))||s.status.toLowerCase().includes(l)))return!1}return!(c&&s.status!==c||d&&s.type!==d||u&&s.floor.toString()!==u||p&&s.capacity.toString()!==p)}),[r,n,c,d,u,p]),O=()=>{C(""),T(null),x(null),S(null),A(null)},E=n||c||d||u||p,k=s=>{switch(s){case"AVAILABLE":return"green";case"OCCUPIED":return"blue";case"MAINTENANCE":return"yellow";case"OUT_OF_ORDER":return"red";default:return"gray"}};return e.jsx(Q,{user:t,children:e.jsxs(N,{children:[e.jsxs(j,{justify:"space-between",children:[e.jsx(H,{order:2,children:"Rooms Management"}),((t==null?void 0:t.role)==="ADMIN"||(t==null?void 0:t.role)==="MANAGER")&&e.jsx(y,{leftSection:e.jsx(se,{size:16}),onClick:F,children:"Add Room"})]}),(a==null?void 0:a.error)&&e.jsx(U,{icon:e.jsx(w,{size:16}),title:"Error",color:"red",children:a.error}),(a==null?void 0:a.success)&&e.jsx(U,{icon:e.jsx(w,{size:16}),title:"Success",color:"green",children:a.success}),e.jsxs(B,{p:"md",withBorder:!0,children:[e.jsxs(j,{mb:"md",children:[e.jsx(ce,{size:20}),e.jsx(i,{fw:500,children:"Filters"}),E&&e.jsx(y,{size:"compact-sm",variant:"subtle",onClick:O,children:"Clear All"})]}),e.jsxs(o,{children:[e.jsx(o.Col,{span:{base:12,sm:6,md:4,lg:2.4},children:e.jsx(_,{placeholder:"Search rooms...",leftSection:e.jsx(le,{size:16}),value:n,onChange:s=>C(s.currentTarget.value)})}),e.jsx(o.Col,{span:{base:12,sm:6,md:4,lg:2.4},children:e.jsx(b,{placeholder:"All Statuses",data:[{value:"AVAILABLE",label:"Available"},{value:"OCCUPIED",label:"Occupied"},{value:"MAINTENANCE",label:"Maintenance"},{value:"OUT_OF_ORDER",label:"Out of Order"}],value:c,onChange:T,clearable:!0})}),e.jsx(o.Col,{span:{base:12,sm:6,md:4,lg:2.4},children:e.jsx(b,{placeholder:"All Types",data:[{value:"SINGLE",label:"Single"},{value:"DOUBLE",label:"Double"},{value:"SUITE",label:"Suite"},{value:"DELUXE",label:"Deluxe"},{value:"PRESIDENTIAL",label:"Presidential"}],value:d,onChange:x,clearable:!0})}),e.jsx(o.Col,{span:{base:12,sm:6,md:4,lg:2.4},children:e.jsx(b,{placeholder:"All Floors",data:v.floors,value:u,onChange:S,clearable:!0})}),e.jsx(o.Col,{span:{base:12,sm:6,md:4,lg:2.4},children:e.jsx(b,{placeholder:"All Capacities",data:v.capacities,value:p,onChange:A,clearable:!0})})]}),e.jsx(z,{my:"md"}),e.jsxs(j,{justify:"space-between",children:[e.jsxs(i,{size:"sm",c:"dimmed",children:["Showing ",D.length," of ",r.length," rooms"]}),E&&e.jsxs(P,{variant:"light",color:"blue",children:[[n&&"Search",c&&"Status",d&&"Type",u&&"Floor",p&&"Capacity"].filter(Boolean).length," filter(s) active"]})]})]}),e.jsx(o,{children:D.length===0?e.jsx(o.Col,{span:12,children:e.jsx(B,{p:"xl",withBorder:!0,children:e.jsxs(N,{align:"center",children:[e.jsx(w,{size:48,color:"gray"}),e.jsx(i,{size:"lg",c:"dimmed",children:E?"No rooms match your filters":"No rooms found"}),E&&e.jsx(y,{variant:"light",onClick:O,children:"Clear Filters"})]})})}):D.map(s=>e.jsx(o.Col,{span:{base:12,sm:6,lg:4},children:e.jsxs(te,{shadow:"sm",p:"lg",h:"100%",children:[e.jsxs(j,{justify:"space-between",mb:"md",children:[e.jsxs(i,{fw:600,size:"lg",children:["Room ",s.number]}),e.jsx(P,{color:k(s.status),size:"sm",children:s.status.replace("_"," ")})]}),e.jsxs(N,{gap:"xs",children:[e.jsxs(i,{size:"sm",children:[e.jsx("strong",{children:"Type:"})," ",s.type.replace("_"," ")]}),e.jsxs(i,{size:"sm",children:[e.jsx("strong",{children:"Floor:"})," ",s.floor]}),e.jsxs(i,{size:"sm",children:[e.jsx("strong",{children:"Capacity:"})," ",s.capacity," guests"]}),e.jsxs(i,{size:"sm",children:[e.jsx("strong",{children:"Price:"})," $",s.pricePerNight,"/night"]}),s.description&&e.jsx(i,{size:"sm",c:"dimmed",children:s.description})]}),((t==null?void 0:t.role)==="ADMIN"||(t==null?void 0:t.role)==="MANAGER"||(t==null?void 0:t.role)==="STAFF")&&e.jsxs(L,{method:"post",style:{marginTop:"1rem"},children:[e.jsx("input",{type:"hidden",name:"intent",value:"update-status"}),e.jsx("input",{type:"hidden",name:"roomId",value:s.id}),e.jsx(b,{name:"status",data:[{value:"AVAILABLE",label:"Available"},{value:"OCCUPIED",label:"Occupied"},{value:"MAINTENANCE",label:"Maintenance"},{value:"OUT_OF_ORDER",label:"Out of Order"}],defaultValue:s.status,onChange:m=>{if(m){const l=new FormData;l.append("intent","update-status"),l.append("roomId",s.id),l.append("status",m),fetch("/dashboard/rooms",{method:"POST",body:l}).then(()=>window.location.reload())}}})]})]})},s.id))}),e.jsx(ae,{opened:f,onClose:g,title:"Add New Room",size:"lg",children:e.jsxs(L,{method:"post",children:[e.jsx("input",{type:"hidden",name:"intent",value:"create"}),e.jsxs(N,{children:[e.jsx(_,{label:"Room Number",placeholder:"101",name:"number",required:!0}),e.jsx(b,{label:"Room Type",placeholder:"Select type",name:"type",data:[{value:"SINGLE",label:"Single"},{value:"DOUBLE",label:"Double"},{value:"SUITE",label:"Suite"},{value:"DELUXE",label:"Deluxe"},{value:"PRESIDENTIAL",label:"Presidential"}],required:!0}),e.jsxs(j,{grow:!0,children:[e.jsx(R,{label:"Floor",placeholder:"1",name:"floor",min:1,required:!0}),e.jsx(R,{label:"Capacity",placeholder:"2",name:"capacity",min:1,required:!0})]}),e.jsx(R,{label:"Price per Night",placeholder:"100",name:"pricePerNight",min:0,prefix:"$",decimalScale:2,required:!0}),e.jsx(re,{label:"Description",placeholder:"Room description...",name:"description",rows:3}),e.jsxs(j,{justify:"flex-end",children:[e.jsx(y,{variant:"outline",onClick:g,children:"Cancel"}),e.jsx(y,{type:"submit",onClick:g,children:"Add Room"})]})]})]})})]})})}export{ze as default,Re as meta};
